<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>com/microsoft/spark/insight/utils/RegressionAnalysis.scala - Spark Insight</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}


  </style>
 </head>
 <body>

  <h1>com/microsoft/spark/insight/utils/RegressionAnalysis.scala - Spark Insight</h1>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L128">ConfidenceLevel</a></li>
<li><a href="#L153">EffectSize</a></li>
<li><a href="#L18">RegressionAnalysis</a></li>
<li><a href="#L89">RegressionAnalysis</a></li>
<li><a href="#L110">RegressionResult</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L114">apply</a></li>
<li><a href="#L138">apply</a></li>
<li><a href="#L157">apply</a></li>
<li><a href="#L170">apply</a></li>
<li><a href="#L78">changePercent</a></li>
<li><a href="#L205">cohensD</a></li>
<li><a href="#L64">confidenceLevel</a></li>
<li><a href="#L57">effectSize</a></li>
<li><a href="#L222">isSignificantlyDifferent</a></li>
<li><a href="#L233">isSignificantlyDifferent</a></li>
<li><a href="#L100">numericSeqToStatisticalSummary</a></li>
<li><a href="#L188">pooledVariance</a></li>
<li><a href="#L71">regressionResult</a></li>
<li><a href="#L43">statSum1</a></li>
<li><a href="#L50">statSum2</a></li>
</ul>
 <h2>Source code</h2>

  <code>package com.microsoft.spark.insight.utils<br/>
<br/>
import com.microsoft.spark.insight.utils.<a href="#L18" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:18">RegressionAnalysis</a>.<a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a>.<a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a><br/>
import com.microsoft.spark.insight.utils.<a href="#L18" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:18">RegressionAnalysis</a>.<a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>.<a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a><br/>
import org.apache.commons.math3.stat.descriptive.{StatisticalSummary, SummaryStatistics}<br/>
import org.apache.commons.math3.stat.inference.TestUtils<br/>
<br/>
/**<br/>
 * Perform a statistically-based regression analysis on the given pair of sample sets.<br/>
 * This class assumes that LOWER IS BETTER for the given [[regressionMetric]].<br/>
 * The underlying statistical tools used for analyzing assume that each of the given sample sets form a normal<br/>
 * distribution.<br/>
 *<br/>
 * @param perfValues1 Sample set #1<br/>
 * @param perfValues2 Sample set #2<br/>
 * @param regressionMetric Name of the performance metric being analyzed<br/>
 */<br/>
<a id="L18">&#x200c;</a>class <span class="linkable">RegressionAnalysis</span>(<br/>
&nbsp; &nbsp; val perfValues1: Seq[PerfValue],<br/>
&nbsp; &nbsp; val perfValues2: Seq[PerfValue],<br/>
&nbsp; &nbsp; val regressionMetric: <a href="PerfMetric.scala.html#L17" title="com/microsoft/spark/insight/utils/PerfMetric.scala:17">PerfMetric</a>) {<br/>
&nbsp; import com.microsoft.spark.insight.utils.<a href="#L18" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:18">RegressionAnalysis</a>._<br/>
&nbsp; import com.microsoft.spark.insight.utils.<a href="#L18" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:18">RegressionAnalysis</a>.<a href="#L110" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:110">RegressionResult</a>._<br/>
<br/>
&nbsp; private val _statSum1: StatisticalSummary = <a href="#L100" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:100">numericSeqToStatisticalSummary</a>(perfValues1)<br/>
&nbsp; private val _statSum2: StatisticalSummary = <a href="#L100" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:100">numericSeqToStatisticalSummary</a>(perfValues2)<br/>
<br/>
&nbsp; private val _effectSize = <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>(_statSum1, _statSum2)<br/>
&nbsp; private val _confidenceLevel = <a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a>(_effectSize)<br/>
<br/>
&nbsp; private val _regressionResult = <a href="#L110" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:110">RegressionResult</a>(_statSum1, _statSum2)<br/>
<br/>
&nbsp; private val _changePercent = _statSum1.getMean match {<br/>
&nbsp; &nbsp; case 0 =&gt; Double.NaN<br/>
&nbsp; &nbsp; case _ =&gt; 100 * (_statSum2.getMean - _statSum1.getMean) / _statSum1.getMean<br/>
&nbsp; }<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Retrieve the first sample set<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return StatisticalSummary object of sample set #1<br/>
&nbsp;&nbsp; */<br/>
<a id="L43">&#x200c;</a>&nbsp; def <span class="linkable">statSum1</span>: StatisticalSummary = _statSum1<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Retrieve the second sample set<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return StatisticalSummary object of sample set #2<br/>
&nbsp;&nbsp; */<br/>
<a id="L50">&#x200c;</a>&nbsp; def <span class="linkable">statSum2</span>: StatisticalSummary = _statSum2<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Retrieve the [[<a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>]] determined for the given pair of sample sets<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a><br/>
&nbsp;&nbsp; */<br/>
<a id="L57">&#x200c;</a>&nbsp; def <span class="linkable">effectSize</span>: <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a> = _effectSize<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Retrieve the [[<a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a>]] determined for the given pair of sample sets<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return <a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a><br/>
&nbsp;&nbsp; */<br/>
<a id="L64">&#x200c;</a>&nbsp; def <span class="linkable">confidenceLevel</span>: <a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a> = _confidenceLevel<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Retrieve the [[<a href="#L110" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:110">RegressionResult</a>]] determined for the given pair of sample sets<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return <a href="#L110" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:110">RegressionResult</a><br/>
&nbsp;&nbsp; */<br/>
<a id="L71">&#x200c;</a>&nbsp; def <span class="linkable">regressionResult</span>: <a href="#L110" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:110">RegressionResult</a> = _regressionResult<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Retrieve the change in the <a href="AggregatePerfValue.scala.html#L18" title="com/microsoft/spark/insight/utils/AggregatePerfValue.scala:18">mean</a> values between the given pair of sample sets in percentage<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return The change in percentage (e.g. 18.377 means 18.377%)<br/>
&nbsp;&nbsp; */<br/>
<a id="L78">&#x200c;</a>&nbsp; def <span class="linkable">changePercent</span>: Double = _changePercent<br/>
<br/>
&nbsp; override def toString: String =<br/>
&nbsp; &nbsp; s&quot;<a href="#L18" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:18">RegressionAnalysis</a> for $regressionMetric: &quot; +<br/>
&nbsp; &nbsp; &nbsp; (_regressionResult match {<br/>
&nbsp; &nbsp; &nbsp; &nbsp; case REGRESSION =&gt; f&quot;A regression of ${_changePercent}%.0f%% was detected in sample set #2&quot;<br/>
&nbsp; &nbsp; &nbsp; &nbsp; case IMPROVEMENT =&gt; f&quot;An improvement of ${_changePercent}%.0f%% was detected in sample set #2&quot;<br/>
&nbsp; &nbsp; &nbsp; &nbsp; case NO_CHANGE =&gt; &quot;No statistically significant change was detected&quot;<br/>
&nbsp; &nbsp; &nbsp; }) + s&quot;; Confidence level: ${_confidenceLevel}&quot;<br/>
}<br/>
<br/>
<a id="L89">&#x200c;</a>object <span class="linkable">RegressionAnalysis</span> {<br/>
&nbsp; val DEFAULT_ALPHA = 0.05<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * A conversion from a [[Numeric]] sequence to a [[StatisticalSummary]]<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @param seq numeric sequence<br/>
&nbsp;&nbsp; * @param <a href="AggregatePerfValue.scala.html#L28" title="com/microsoft/spark/insight/utils/AggregatePerfValue.scala:28">n</a> implicit numeric object<br/>
&nbsp;&nbsp; * @tparam T actual type for the Numeric objects<br/>
&nbsp;&nbsp; * @return a StatisticalSummary built from the provided sequence<br/>
&nbsp;&nbsp; */<br/>
<a id="L100">&#x200c;</a>&nbsp; def <span class="linkable">numericSeqToStatisticalSummary</span>[T](seq: Seq[T])(implicit <a href="AggregatePerfValue.scala.html#L28" title="com/microsoft/spark/insight/utils/AggregatePerfValue.scala:28">n</a>: Numeric[T]): StatisticalSummary = {<br/>
&nbsp; &nbsp; val summaryStatistics = new SummaryStatistics()<br/>
&nbsp; &nbsp; seq.map(<a href="AggregatePerfValue.scala.html#L28" title="com/microsoft/spark/insight/utils/AggregatePerfValue.scala:28">n</a>.toDouble).foreach(summaryStatistics.addValue)<br/>
&nbsp; &nbsp; summaryStatistics<br/>
&nbsp; }<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * The result of the regression analysis - whether a statistically significant regression/improvement has been<br/>
&nbsp;&nbsp; * detected between the two given sample sets. This object assumes that LOWER values are BETTER.<br/>
&nbsp;&nbsp; */<br/>
<a id="L110">&#x200c;</a>&nbsp; object <span class="linkable">RegressionResult</span> extends Enumeration {<br/>
&nbsp; &nbsp; type <a href="#L110" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:110">RegressionResult</a> = Value<br/>
&nbsp; &nbsp; val NO_CHANGE, REGRESSION, IMPROVEMENT = Value<br/>
<br/>
<a id="L114">&#x200c;</a>&nbsp; &nbsp; private[utils] def <span class="linkable">apply</span>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>: StatisticalSummary, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>: StatisticalSummary): <a href="#L110" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:110">RegressionResult</a> =<br/>
&nbsp; &nbsp; &nbsp; <a href="#L222" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:222">isSignificantlyDifferent</a>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>) match {<br/>
&nbsp; &nbsp; &nbsp; &nbsp; case true if <a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>.getMean &lt; <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>.getMean =&gt; REGRESSION<br/>
&nbsp; &nbsp; &nbsp; &nbsp; case true if <a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>.getMean &gt; <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>.getMean =&gt; IMPROVEMENT<br/>
&nbsp; &nbsp; &nbsp; &nbsp; case _ =&gt; NO_CHANGE<br/>
&nbsp; &nbsp; &nbsp; }<br/>
&nbsp; }<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Provides a mapping from an [[<a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>]] to a confidence level that is more descriptive of its role in analyzing<br/>
&nbsp;&nbsp; * two sample sets. Furthermore, the [[<a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a>]] logic may differ from the [[<a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>]] when more<br/>
&nbsp;&nbsp; * heuristics are introduced to better <a href="../cli/frontend/TextStyling.scala.html#L37" title="com/microsoft/spark/insight/cli/frontend/TextStyling.scala:37">handle</a> corner cases. The reason for separating those heuristics from<br/>
&nbsp;&nbsp; * [[<a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>]] is done in order to keep [[<a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>]] as close as possible to its mathematical definition.<br/>
&nbsp;&nbsp; */<br/>
<a id="L128">&#x200c;</a>&nbsp; object <span class="linkable">ConfidenceLevel</span> extends Enumeration {<br/>
&nbsp; &nbsp; type <a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a> = Value<br/>
&nbsp; &nbsp; val UNDEFINED, VERY_LOW, LOW, MEDIUM, HIGH = Value<br/>
<br/>
&nbsp; &nbsp; /**<br/>
&nbsp; &nbsp;&nbsp; * Map the given [[<a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>]] to a [[<a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a>]]<br/>
&nbsp; &nbsp;&nbsp; *<br/>
&nbsp; &nbsp;&nbsp; * @param <a href="#L57" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:57">effectSize</a> to map<br/>
&nbsp; &nbsp;&nbsp; * @return <a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a><br/>
&nbsp; &nbsp;&nbsp; */<br/>
<a id="L138">&#x200c;</a>&nbsp; &nbsp; private[utils] def <span class="linkable">apply</span>(<a href="#L57" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:57">effectSize</a>: <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>): <a href="#L128" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:128">ConfidenceLevel</a> = <a href="#L57" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:57">effectSize</a> match {<br/>
&nbsp; &nbsp; &nbsp; case <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>.UNDEFINED =&gt; UNDEFINED<br/>
&nbsp; &nbsp; &nbsp; case <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>.TINY =&gt; VERY_LOW<br/>
&nbsp; &nbsp; &nbsp; case <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>.SMALL =&gt; LOW<br/>
&nbsp; &nbsp; &nbsp; case <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>.MEDIUM =&gt; MEDIUM<br/>
&nbsp; &nbsp; &nbsp; case <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>.LARGE =&gt; HIGH<br/>
&nbsp; &nbsp; }<br/>
&nbsp; }<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Effect Size to verbally describe a Cohen's D <a href="../fetcher/status/statusapiv1.scala.html#L305" title="com/microsoft/spark/insight/fetcher/status/statusapiv1.scala:305">value</a>.<br/>
&nbsp;&nbsp; * A smaller effect size basically means a lower confidence level in the determining the significance of a<br/>
&nbsp;&nbsp; * t-statistic. To increase the effect size, users can provide more samples for either sample sets.<br/>
&nbsp;&nbsp; * @see [[https://en.wikipedia.org/wiki/Effect_size]] for more info<br/>
&nbsp;&nbsp; */<br/>
<a id="L153">&#x200c;</a>&nbsp; object <span class="linkable">EffectSize</span> extends Enumeration {<br/>
&nbsp; &nbsp; type <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a> = Value<br/>
&nbsp; &nbsp; val UNDEFINED, TINY, SMALL, MEDIUM, LARGE = Value<br/>
<br/>
<a id="L157">&#x200c;</a>&nbsp; &nbsp; private[utils] def <span class="linkable">apply</span>(cohensd: Double): <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a> = {<br/>
&nbsp; &nbsp; &nbsp; // These are well-known values, taken from https://en.wikipedia.org/wiki/Effect_size#Cohen's_d<br/>
&nbsp; &nbsp; &nbsp; if (cohensd &lt;= 0.2) {<br/>
&nbsp; &nbsp; &nbsp; &nbsp; TINY<br/>
&nbsp; &nbsp; &nbsp; } else if (cohensd &lt;= 0.5) {<br/>
&nbsp; &nbsp; &nbsp; &nbsp; SMALL<br/>
&nbsp; &nbsp; &nbsp; } else if (cohensd &lt;= 0.8) {<br/>
&nbsp; &nbsp; &nbsp; &nbsp; MEDIUM<br/>
&nbsp; &nbsp; &nbsp; } else {<br/>
&nbsp; &nbsp; &nbsp; &nbsp; LARGE<br/>
&nbsp; &nbsp; &nbsp; }<br/>
&nbsp; &nbsp; }<br/>
<br/>
<a id="L170">&#x200c;</a>&nbsp; &nbsp; private[utils] def <span class="linkable">apply</span>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>: StatisticalSummary, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>: StatisticalSummary): <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a> = {<br/>
&nbsp; &nbsp; &nbsp; try {<br/>
&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>(<a href="#L205" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:205">cohensD</a>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>))<br/>
&nbsp; &nbsp; &nbsp; } catch {<br/>
&nbsp; &nbsp; &nbsp; &nbsp; // <a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a> is undefined if the <a href="../fetcher/status/statusapiv1.scala.html#L305" title="com/microsoft/spark/insight/fetcher/status/statusapiv1.scala:305">value</a> of Cohen's d is non-computable in the case where the Pooled Variance = 0<br/>
&nbsp; &nbsp; &nbsp; &nbsp; case _: IllegalArgumentException =&gt; UNDEFINED<br/>
&nbsp; &nbsp; &nbsp; }<br/>
&nbsp; &nbsp; }<br/>
&nbsp; }<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Compute the Pooled Variance for the two given sample sets.<br/>
&nbsp;&nbsp; * @see [[https://en.wikipedia.org/wiki/Pooled_variance]]<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @param <a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a> Sample set #1<br/>
&nbsp;&nbsp; * @param <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a> Sample set #2<br/>
&nbsp;&nbsp; * @return Pooled Variance<br/>
&nbsp;&nbsp; */<br/>
<a id="L188">&#x200c;</a>&nbsp; def <span class="linkable">pooledVariance</span>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>: StatisticalSummary, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>: StatisticalSummary): Double = {<br/>
&nbsp; &nbsp; require(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>.getN + <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>.getN &gt; 2, &quot;Sample sets are too small&quot;)<br/>
<br/>
&nbsp; &nbsp; ((<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>.getN - 1) * <a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>.getVariance + (<a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>.getN - 1) * <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>.getVariance) /<br/>
&nbsp; &nbsp; &nbsp; (<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>.getN + <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>.getN - 2)<br/>
&nbsp; }<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Compute the Cohen's d coefficient for the two given sample sets.<br/>
&nbsp;&nbsp; * Cohen's d is used here to determine the effect size of the sample sets under test.<br/>
&nbsp;&nbsp; * @see [[<a href="#L153" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:153">EffectSize</a>]]<br/>
&nbsp;&nbsp; * @see [[https://en.wikipedia.org/wiki/Effect_size#Cohen's_d]]<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @param <a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a> Sample set #1<br/>
&nbsp;&nbsp; * @param <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a> Sample set #2<br/>
&nbsp;&nbsp; * @return Cohen's d coefficient<br/>
&nbsp;&nbsp; */<br/>
<a id="L205">&#x200c;</a>&nbsp; def <span class="linkable">cohensD</span>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>: StatisticalSummary, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>: StatisticalSummary): Double =<br/>
&nbsp; &nbsp; <a href="#L188" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:188">pooledVariance</a>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>) match {<br/>
&nbsp; &nbsp; &nbsp; case 0 =&gt; throw new IllegalArgumentException(&quot;Pooled <a href="AggregatePerfValue.scala.html#L20" title="com/microsoft/spark/insight/utils/AggregatePerfValue.scala:20">variance</a> is 0 - unable to compute the Cohen's d coefficient&quot;)<br/>
&nbsp; &nbsp; &nbsp; case pooledVar =&gt; Math.abs((<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>.getMean - <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>.getMean) / Math.sqrt(pooledVar))<br/>
&nbsp; &nbsp; }<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Perform a non-equal <a href="AggregatePerfValue.scala.html#L20" title="com/microsoft/spark/insight/utils/AggregatePerfValue.scala:20">variance</a>, non-equal size Student's t-test (AKA Welch's t-test) with the given &quot;alpha&quot; <a href="../fetcher/status/statusapiv1.scala.html#L305" title="com/microsoft/spark/insight/fetcher/status/statusapiv1.scala:305">value</a>.<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * A lower alpha effectively means a stringent statistical significance threshold - a lower alpha <a href="../fetcher/status/statusapiv1.scala.html#L305" title="com/microsoft/spark/insight/fetcher/status/statusapiv1.scala:305">value</a> will require<br/>
&nbsp;&nbsp; * a stronger statistically significant difference to exist between the two sample sets for rejecting the t-test.<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @param <a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>&nbsp; &nbsp; Sample set #1<br/>
&nbsp;&nbsp; * @param <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>&nbsp; &nbsp; Sample set #2<br/>
&nbsp;&nbsp; * @param alpha alpha <a href="../fetcher/status/statusapiv1.scala.html#L305" title="com/microsoft/spark/insight/fetcher/status/statusapiv1.scala:305">value</a> to use for the t-test<br/>
&nbsp;&nbsp; * @return True iff there is a statistically significant difference between the two sample sets with the given alpha<br/>
&nbsp;&nbsp; */<br/>
<a id="L222">&#x200c;</a>&nbsp; def <span class="linkable">isSignificantlyDifferent</span>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>: StatisticalSummary, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>: StatisticalSummary, alpha: Double): Boolean =<br/>
&nbsp; &nbsp; TestUtils.tTest(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>, alpha)<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Perform a non-equal <a href="AggregatePerfValue.scala.html#L20" title="com/microsoft/spark/insight/utils/AggregatePerfValue.scala:20">variance</a>, non-equal size Student's t-test (AKA Welch's t-test) with [[DEFAULT_ALPHA]] as the<br/>
&nbsp;&nbsp; * &quot;alpha&quot; <a href="../fetcher/status/statusapiv1.scala.html#L305" title="com/microsoft/spark/insight/fetcher/status/statusapiv1.scala:305">value</a>.<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @param <a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a> Sample set #1<br/>
&nbsp;&nbsp; * @param <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a> Sample set #2<br/>
&nbsp;&nbsp; * @return True iff there is a statistically significant difference between the two sample sets with the given alpha<br/>
&nbsp;&nbsp; */<br/>
<a id="L233">&#x200c;</a>&nbsp; def <span class="linkable">isSignificantlyDifferent</span>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>: StatisticalSummary, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>: StatisticalSummary): Boolean =<br/>
&nbsp; &nbsp; <a href="#L222" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:222">isSignificantlyDifferent</a>(<a href="#L43" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:43">statSum1</a>, <a href="#L50" title="com/microsoft/spark/insight/utils/RegressionAnalysis.scala:50">statSum2</a>, DEFAULT_ALPHA)<br/>
}<br/>
</code>

 </body>
</html>
