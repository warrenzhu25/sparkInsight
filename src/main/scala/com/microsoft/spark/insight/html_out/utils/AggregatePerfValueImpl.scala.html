<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>utils/AggregatePerfValueImpl.scala - Spark Insight</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}


  </style>
 </head>
 <body>

  <h1>utils/AggregatePerfValueImpl.scala - Spark Insight</h1>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L10">AggregatePerfValueImpl</a></li>
</ul>
 <h2>Source code</h2>

  <code>package com.microsoft.spark.insight.utils<br/>
<br/>
import org.apache.commons.math3.stat.descriptive.DescriptiveStatistics<br/>
<br/>
/**<br/>
 * A simplified implementation of [[<a href="AggregatePerfValue.scala.html#L6" title="utils/AggregatePerfValue.scala:6">AggregatePerfValue</a>]] using [[DescriptiveStatistics]]<br/>
 *<br/>
 * @param perfValues values to aggregate<br/>
 */<br/>
<a id="L10">&#x200c;</a>class <span class="linkable">AggregatePerfValueImpl</span>(perfValues: Seq[PerfValue]) extends <a href="AggregatePerfValue.scala.html#L6" title="utils/AggregatePerfValue.scala:6">AggregatePerfValue</a> {<br/>
&nbsp; private val _descriptiveStatistics = new DescriptiveStatistics(perfValues.length)<br/>
&nbsp; perfValues.foreach(_descriptiveStatistics.addValue(_))<br/>
<br/>
&nbsp; override def <a href="AggregatePerfValue.scala.html#L14" title="utils/AggregatePerfValue.scala:14">percentile</a>(p: Int): Double = p match {<br/>
&nbsp; &nbsp; case per if 0 to 100 contains per =&gt; _descriptiveStatistics.getPercentile(per)<br/>
&nbsp; &nbsp; case _ =&gt; throw new IllegalArgumentException(&quot;p must be between 0 and 100&quot;)<br/>
&nbsp; }<br/>
<br/>
&nbsp; override def <a href="AggregatePerfValue.scala.html#L16" title="utils/AggregatePerfValue.scala:16">getPerfValues</a>: Seq[PerfValue] = perfValues<br/>
<br/>
&nbsp; override def <a href="AggregatePerfValue.scala.html#L18" title="utils/AggregatePerfValue.scala:18">mean</a>: Double = _descriptiveStatistics.getMean<br/>
<br/>
&nbsp; override def <a href="AggregatePerfValue.scala.html#L20" title="utils/AggregatePerfValue.scala:20">variance</a>: Double = _descriptiveStatistics.getPopulationVariance<br/>
<br/>
&nbsp; override def <a href="AggregatePerfValue.scala.html#L22" title="utils/AggregatePerfValue.scala:22">stddev</a>: Double = math.sqrt(<a href="AggregatePerfValue.scala.html#L20" title="utils/AggregatePerfValue.scala:20">variance</a>)<br/>
<br/>
&nbsp; override def <a href="AggregatePerfValue.scala.html#L24" title="utils/AggregatePerfValue.scala:24">min</a>: Double = _descriptiveStatistics.getMin<br/>
<br/>
&nbsp; override def <a href="AggregatePerfValue.scala.html#L26" title="utils/AggregatePerfValue.scala:26">max</a>: Double = _descriptiveStatistics.getMax<br/>
<br/>
&nbsp; override def <a href="AggregatePerfValue.scala.html#L28" title="utils/AggregatePerfValue.scala:28">n</a>: Int = _descriptiveStatistics.getN.toInt<br/>
<br/>
&nbsp; override def equals(other: Any): Boolean = other match {<br/>
&nbsp; &nbsp; case that: <a href="#L10" title="utils/AggregatePerfValueImpl.scala:10">AggregatePerfValueImpl</a> =&gt;<br/>
&nbsp; &nbsp; &nbsp; _descriptiveStatistics.getValues.sameElements(that._descriptiveStatistics.getValues)<br/>
&nbsp; &nbsp; case _ =&gt; false<br/>
&nbsp; }<br/>
<br/>
&nbsp; override def hashCode(): Int = {<br/>
&nbsp; &nbsp; val state = Seq(_descriptiveStatistics)<br/>
&nbsp; &nbsp; state.map(_.hashCode()).foldLeft(0)((a, b) =&gt; 31 * a + b)<br/>
&nbsp; }<br/>
}<br/>
</code>

 </body>
</html>
