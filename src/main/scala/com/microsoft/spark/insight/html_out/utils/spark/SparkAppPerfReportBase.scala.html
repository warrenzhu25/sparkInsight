<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>utils/spark/SparkAppPerfReportBase.scala - Spark Insight</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}


  </style>
 </head>
 <body>

  <h1>utils/spark/SparkAppPerfReportBase.scala - Spark Insight</h1>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L19">SparkAppPerfReportBase</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L48">buildJobLevelReport</a></li>
<li><a href="#L33">buildPerJobData</a></li>
<li><a href="#L40">buildSummaryReport</a></li>
<li><a href="#L70">jobLevelReport</a></li>
<li><a href="#L56">perJobReport</a></li>
<li><a href="#L63">summaryReport</a></li>
</ul>
 <h2>Source code</h2>

  <code>package com.microsoft.spark.insight.utils.spark<br/>
<br/>
import com.microsoft.spark.insight.utils._<br/>
<br/>
import scala.collection.immutable.ListMap<br/>
<br/>
/**<br/>
 * A template for constructing Spark Application Performance Reports<br/>
 *<br/>
 * Implementers will need to provide the builder methods to construct the internal structures that hold the performance<br/>
 * data. The super class implementation will then use the builders to construct the underlying [[<a href="PerJobReport.scala.html#L19" title="utils/spark/PerJobReport.scala:19">PerJobReport</a>]] and<br/>
 * [[<a href="PerStageReport.scala.html#L15" title="utils/spark/PerStageReport.scala:15">PerStageReport</a>]] objects and expose them through a unified interface. This template class is meant to reduce the<br/>
 * effort needed by consumers processing different types of reports.<br/>
 *<br/>
 * @tparam JobKey the unique identifier to be used for jobs<br/>
 * @tparam StageKey the unique identifier to be used for stages<br/>
 * @tparam PerfMetricsType the type of [[<a href="SparkAppPerfReport.scala.html#L145" title="utils/spark/SparkAppPerfReport.scala:145">PerfMetrics</a>]] object to be used, per-<a href="PerStageReport.scala.html#L26" title="utils/spark/PerStageReport.scala:26">stage</a><br/>
 */<br/>
<a id="L19">&#x200c;</a>abstract class <span class="linkable">SparkAppPerfReportBase</span>[JobKey, StageKey, PerfMetricsType &lt;: <a href="SparkAppPerfReport.scala.html#L145" title="utils/spark/SparkAppPerfReport.scala:145">PerfMetrics</a>[Any]] {<br/>
&nbsp; private val _perJobReport = <a href="PerJobReport.scala.html#L19" title="utils/spark/PerJobReport.scala:19">PerJobReport</a>(<a href="#L33" title="utils/spark/SparkAppPerfReportBase.scala:33">buildPerJobData</a>)<br/>
<br/>
&nbsp; private val _summaryReport = <a href="#L40" title="utils/spark/SparkAppPerfReportBase.scala:40">buildSummaryReport</a>.<a href="../../cli/AppReportSets.scala.html#L43" title="cli/AppReportSets.scala:43">apply</a>()<br/>
<br/>
&nbsp; private val _jobLevelReport = <a href="#L48" title="utils/spark/SparkAppPerfReportBase.scala:48">buildJobLevelReport</a>.<a href="../../cli/AppReportSets.scala.html#L43" title="cli/AppReportSets.scala:43">apply</a>()<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * A lambda that produces the internal data needed to construct a [[<a href="PerJobReport.scala.html#L19" title="utils/spark/PerJobReport.scala:19">PerJobReport</a>]]. Namely, a sequence of pairs of<br/>
&nbsp;&nbsp; * <a href="PerJobReport.scala.html#L62" title="utils/spark/PerJobReport.scala:62">jobKeys</a>, coupled with a sequence of stages per-JobKey that includes the underlying <a href="PerStageReport.scala.html#L40" title="utils/spark/PerStageReport.scala:40">stageKeys</a> and their matching<br/>
&nbsp;&nbsp; * <a href="SparkAppPerfReport.scala.html#L145" title="utils/spark/SparkAppPerfReport.scala:145">PerfMetrics</a>. The lambda may fail without failing the construction of the entire report.<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return a sequence of pairs of <a href="PerJobReport.scala.html#L62" title="utils/spark/PerJobReport.scala:62">jobKeys</a> and a sequence of pairs of <a href="PerStageReport.scala.html#L40" title="utils/spark/PerStageReport.scala:40">stageKeys</a> and their corresponding <a href="SparkAppPerfReport.scala.html#L145" title="utils/spark/SparkAppPerfReport.scala:145">PerfMetrics</a><br/>
&nbsp;&nbsp; */<br/>
<a id="L33">&#x200c;</a>&nbsp; protected def <span class="linkable">buildPerJobData</span>: () =&gt; Seq[(JobKey, Seq[(StageKey, PerfMetricsType)])]<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * A lambda that produces a [[PerfMetricsType]] object enclosing a summarized view of the metrics from all stages<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return a <a href="SparkAppPerfReport.scala.html#L145" title="utils/spark/SparkAppPerfReport.scala:145">PerfMetrics</a> object<br/>
&nbsp;&nbsp; */<br/>
<a id="L40">&#x200c;</a>&nbsp; protected def <span class="linkable">buildSummaryReport</span>: () =&gt; PerfMetricsType<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * A lambda that produces a Map of metrics aggregated at a <a href="PerJobReport.scala.html#L48" title="utils/spark/PerJobReport.scala:48">job</a>-level with<br/>
&nbsp;&nbsp; * [[JobKey]] as keys and corresponding [[PerfMetricsType]] as values<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return ListMap of <a href="PerJobReport.scala.html#L48" title="utils/spark/PerJobReport.scala:48">job</a>-level metrics<br/>
&nbsp;&nbsp; */<br/>
<a id="L48">&#x200c;</a>&nbsp; protected def <span class="linkable">buildJobLevelReport</span>: () =&gt; ListMap[JobKey, PerfMetricsType]<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Returns the [[<a href="PerJobReport.scala.html#L19" title="utils/spark/PerJobReport.scala:19">PerJobReport</a>]] object for this report, containing an internal break-down into jobs, and then stages,<br/>
&nbsp;&nbsp; * with a per-<a href="PerStageReport.scala.html#L26" title="utils/spark/PerStageReport.scala:26">stage</a> [[PerfMetricsType]] object<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return a <a href="PerJobReport.scala.html#L19" title="utils/spark/PerJobReport.scala:19">PerJobReport</a> object<br/>
&nbsp;&nbsp; */<br/>
<a id="L56">&#x200c;</a>&nbsp; def <span class="linkable">perJobReport</span>: <a href="PerJobReport.scala.html#L19" title="utils/spark/PerJobReport.scala:19">PerJobReport</a>[JobKey, StageKey, PerfMetricsType] = _perJobReport<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Returns the [[PerfMetricsType]] object containing summarized metrics of all of the underlying jobs and stages<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return a <a href="SparkAppPerfReport.scala.html#L145" title="utils/spark/SparkAppPerfReport.scala:145">PerfMetrics</a> object<br/>
&nbsp;&nbsp; */<br/>
<a id="L63">&#x200c;</a>&nbsp; def <span class="linkable">summaryReport</span>: PerfMetricsType = _summaryReport<br/>
<br/>
&nbsp; /**<br/>
&nbsp;&nbsp; * Returns a Map of <a href="PerJobReport.scala.html#L48" title="utils/spark/PerJobReport.scala:48">job</a>-level metrics with [[JobKey]] as keys and corresponding [[PerfMetricsType]] as values<br/>
&nbsp;&nbsp; *<br/>
&nbsp;&nbsp; * @return ListMap of <a href="PerJobReport.scala.html#L48" title="utils/spark/PerJobReport.scala:48">job</a>-level metrics<br/>
&nbsp;&nbsp; */<br/>
<a id="L70">&#x200c;</a>&nbsp; def <span class="linkable">jobLevelReport</span>: ListMap[JobKey, PerfMetricsType] = _jobLevelReport<br/>
}<br/>
</code>

 </body>
</html>
